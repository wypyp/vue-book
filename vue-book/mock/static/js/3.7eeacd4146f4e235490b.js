webpackJsonp([3],{"5zde":function(e,t,o){o("zQR9"),o("qyJz"),e.exports=o("FeBl").Array.from},FMPN:function(e,t){},Gu7T:function(e,t,o){"use strict";t.__esModule=!0;var r,n=o("c/Tr"),s=(r=n)&&r.__esModule?r:{default:r};t.default=function(e){if(Array.isArray(e)){for(var t=0,o=Array(e.length);t<e.length;t++)o[t]=e[t];return o}return(0,s.default)(e)}},"c/Tr":function(e,t,o){e.exports={default:o("5zde"),__esModule:!0}},fBQ2:function(e,t,o){"use strict";var r=o("evD5"),n=o("X8DO");e.exports=function(e,t,o){t in e?r.f(e,t,n(0,o)):e[t]=o}},qyJz:function(e,t,o){"use strict";var r=o("+ZMJ"),n=o("kM2E"),s=o("sB3e"),a=o("msXi"),i=o("Mhyx"),l=o("QRG4"),c=o("fBQ2"),u=o("3fs2");n(n.S+n.F*!o("dY0y")(function(e){Array.from(e)}),"Array",{from:function(e){var t,o,n,f,v=s(e),d="function"==typeof this?this:Array,h=arguments.length,p=h>1?arguments[1]:void 0,k=void 0!==p,m=0,_=u(v);if(k&&(p=r(p,h>2?arguments[2]:void 0,2)),void 0==_||d==Array&&i(_))for(o=new d(t=l(v.length));t>m;m++)c(o,m,k?p(v[m],m):v[m]);else for(f=_.call(v),o=new d;!(n=f.next()).done;m++)c(o,m,k?a(f,p,[n.value,m],!0):n.value);return o.length=m,o}})},tcnj:function(e,t,o){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var r=o("Xxa5"),n=o.n(r),s=o("Gu7T"),a=o.n(s),i=o("exGp"),l=o.n(i),c=o("UeVD"),u=o("gyMJ"),f={created:function(){this.getAllBooks()},data:function(){return{allBooks:[],offset:0,hasMore:!0,isLoading:!1}},mounted:function(){var e=this,t=this.$refs.scroll,o=t.offsetTop,r=0;t.addEventListener("touchstart",function(n){if(console.log(t.style.top),0==t.style.top&&t.offsetTop==o){var s=n.touches[0].pageY,a=function(n){clearInterval(e.timer1),e.timer1=setInterval(function(){if(r<=0)return clearInterval(e.timer1),r=0,t.style.top=o+"px",e.allBooks=[],e.offset=0,void e.getAllBooks();r-=1,t.style.top=o+r+"px"},1)};t.addEventListener("touchmove",function e(n){var i=n.touches[0].pageY;(r=i-s)>0?r<=50?t.style.top=r+o+"px":(r=50,t.style.top=o+50+"px"):(t.removeEventListener("touchmove",e),t.removeEventListener("touchend",a))}),t.addEventListener("touchend",a)}},!1)},methods:{loadMore:function(){var e=this;clearTimeout(this.timer),this.timer=setTimeout(function(){var t=e.$refs.scroll;t.scrollTop+t.clientHeight+20>t.scrollHeight&&e.getAllBooks()},60)},more:function(){this.getAllBooks()},getAllBooks:function(){var e=this;return l()(n.a.mark(function t(){var o,r,s;return n.a.wrap(function(t){for(;;)switch(t.prev=t.next){case 0:if(e.isLoading=!0,!e.isLoading||!e.hasMore){t.next=11;break}return t.next=4,Object(u.d)(e.offset);case 4:o=t.sent,r=o.hasMore,s=o.books,e.allBooks=[].concat(a()(e.allBooks),a()(s)),e.hasMore=r,e.isLoading=!1,e.offset=e.allBooks.length;case 11:case"end":return t.stop()}},t,e)}))()},remove:function(e){var t=this;return l()(n.a.mark(function o(){return n.a.wrap(function(o){for(;;)switch(o.prev=o.next){case 0:return o.next=2,Object(u.e)(e);case 2:t.allBooks=t.allBooks.filter(function(t){return t.bookId!==e});case 3:case"end":return o.stop()}},o,t)}))()}},components:{MHeader:c.a}},v={render:function(){var e=this,t=e.$createElement,o=e._self._c||t;return o("div",[o("MHeader",{attrs:{back:!0}},[e._v("列表")]),e._v(" "),o("div",{ref:"scroll",staticClass:"content",on:{scroll:e.loadMore}},[o("ul",e._l(e.allBooks,function(t,r){return o("router-link",{key:r,attrs:{to:{name:"detail",params:{bid:t.bookId}},tag:"li"}},[o("img",{directives:[{name:"lazy",rawName:"v-lazy",value:t.bookCover,expression:"book.bookCover"}],attrs:{alt:""}}),e._v(" "),o("div",[o("h4",[e._v(e._s(t.bookName))]),e._v(" "),o("p",[e._v(e._s(t.bookInfo))]),e._v(" "),o("b",[e._v(e._s(t.bookPrice))]),e._v(" "),o("button",{on:{click:function(o){o.stopPropagation(),e.remove(t.bookId)}}},[e._v("删除")])])])})),e._v(" "),e.hasMore?o("div",{staticClass:"more",on:{click:e.more}},[e._v("加载更多")]):o("div",{staticClass:"more"},[e._v("没有更多啦")])])],1)},staticRenderFns:[]};var d=o("VU/8")(f,v,!1,function(e){o("FMPN")},"data-v-01facbe3",null);t.default=d.exports}});
//# sourceMappingURL=3.7eeacd4146f4e235490b.js.map